{
  "name": "squat",
  "description": "Standard squat exercise with full range of motion",
  "initial_state": "standing",
  "target_joints": ["left_knee", "right_knee", "left_hip", "right_hip", "back"],

  "rep_pattern": ["standing", "bottom", "standing"],

  "states": {
  "standing": {
    "conditions": {
      "min_left_knee_angle": 160,
      "min_right_knee_angle": 160
    }
  },
  "bottom": {
    "conditions": {
      "max_right_knee_angle": 110,
      "max_left_knee_angle": 110
    }
  }
},

  "error_checks": [
    {
      "name": "left_knee_too_deep",
      "condition": {
        "type": "angle_threshold",
        "joint": "left_knee",
        "operator": "<",
        "threshold": 50
      },
      "message": "Knie zu tief gebeugt - Verletzungsgefahr!",
      "type": "warning",
      "priority": 5,
      "check_in_states": ["descending", "bottom", "ascending"]
    },
    {
      "name": "right_knee_too_deep",
      "condition": {
        "type": "angle_threshold",
        "joint": "right_knee",
        "operator": "<",
        "threshold": 50
      },
      "message": "Knie zu tief gebeugt - Verletzungsgefahr!",
      "type": "warning",
      "priority": 5,
      "check_in_states": ["descending", "bottom", "ascending"]
    },
    {
      "name": "left_knee_not_deep_enough",
      "condition": {
        "type": "angle_threshold",
        "joint": "left_knee",
        "operator": ">",
        "threshold": 120
      },
      "message": "Knie nicht tief genug - gehe weiter runter",
      "type": "warning",
      "priority": 2,
      "check_in_states": ["bottom"]
    },
    {
      "name": "back_too_forward",
      "condition": {
        "type": "angle_threshold",
        "joint": "back",
        "operator": "<",
        "threshold": 160
      },
      "message": "Rücken zu weit nach vorne gebeugt",
      "type": "error",
      "priority": 3,
      "check_in_states": ["descending", "bottom", "ascending"]
    },
    {
      "name": "hip_not_low_enough",
      "condition": {
        "type": "position_threshold",
        "position": "hip_center",
        "axis": "y",
        "threshold": 0.8,
        "operator": ">"
      },
      "message": "Hüfte nicht tief genug",
      "type": "warning",
      "priority": 2,
      "check_in_states": ["bottom"]
    }
  ]
}
